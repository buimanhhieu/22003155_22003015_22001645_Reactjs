import{k as f,u as k,j as s,H as C,B as F,L as v,p as h,v as P,m as y}from"./index-DGzCVaFN.js";import{u as B,C as i}from"./index.esm-sseFTSVY.js";import{r as l,I as R,E as m,a as p}from"./rules-DeAEKNhc.js";import{R as b,C as E,B as N,F as I,a as M,b as S,c as d,d as V,e as H}from"./register.style-CqJPt_dZ.js";function $(){const{control:o,handleSubmit:u,getValues:n,setError:x,formState:{errors:t}}=B({defaultValues:{email:"",password:"",confirmPassword:""}}),j=f(),g=k(),w=async e=>{const a={email:e.email,password:e.password};try{const r=await j(P(a));y(r),g(h.home,{replace:!0})}catch(r){if(r.status===422)for(const c in r.data)x(c,{type:"server",message:r.data[c]})}};return s.jsxs(b,{children:[s.jsx(C,{children:s.jsx("title",{children:"Đăng ký"})}),s.jsxs(E,{className:"container",children:[s.jsx(N,{}),s.jsxs(I,{children:[s.jsx(M,{children:"Đăng ký"}),s.jsxs(S,{onSubmit:u(w),noValidate:!0,children:[s.jsxs(d,{children:[s.jsx(i,{name:"email",control:o,rules:l.email,render:({field:e})=>s.jsx(R,{type:"email",name:"email",placeholder:"Email",onChange:a=>e.onChange(a),value:n("email")})}),s.jsx(m,{errors:t,name:"email"})]}),s.jsxs(d,{children:[s.jsx(i,{name:"password",control:o,rules:l.password,render:({field:e})=>s.jsx(p,{name:"password",placeholder:"Mật khẩu",onChange:a=>e.onChange(a),value:n("password")})}),s.jsx(m,{errors:t,name:"password"})]}),s.jsxs(d,{children:[s.jsx(i,{name:"confirmPassword",control:o,rules:{...l.confirmPassword,validate:{samePassword:e=>e===n("password")||"Mật khẩu không khớp"}},render:({field:e})=>s.jsx(p,{placeholder:"Nhập lại mật khẩu",name:"confirmPassword",onChange:a=>e.onChange(a),value:n("confirmPassword")})}),s.jsx(m,{errors:t,name:"confirmPassword"})]}),s.jsx(V,{children:s.jsx(F,{type:"submit",children:"Đăng ký"})})]}),s.jsxs(H,{children:[s.jsx("span",{children:"Bạn đã có tài khoản chưa?"}),s.jsx(v,{to:h.login,className:"link",children:"Đăng nhập"})]})]})]})]})}export{$ as default};
